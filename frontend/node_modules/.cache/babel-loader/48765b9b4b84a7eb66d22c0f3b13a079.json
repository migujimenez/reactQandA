{"ast":null,"code":"import _regeneratorRuntime from\"C:/MyApps/reactQandA/clientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/MyApps/reactQandA/clientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:/MyApps/reactQandA/clientApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{http}from'./http';import{getAccessToken}from'./Auth';export var mapQuestionFromServer=function mapQuestionFromServer(question){return _objectSpread(_objectSpread({},question),{},{created:new Date(question.created),answers:question.answers?question.answers.map(function(answer){return _objectSpread(_objectSpread({},answer),{},{created:new Date(answer.created)});}):[]});};export var getUnansweredQuestions=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return http({path:'/questions/unanswered'});case 2:result=_context.sent;if(!(result.ok&&result.body)){_context.next=7;break;}return _context.abrupt(\"return\",result.body.map(mapQuestionFromServer));case 7:return _context.abrupt(\"return\",[]);case 8:case\"end\":return _context.stop();}}},_callee);}));return function getUnansweredQuestions(){return _ref.apply(this,arguments);};}();export var getQuestion=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(questionId){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return http({path:\"/questions/\".concat(questionId)});case 2:result=_context2.sent;if(!(result.ok&&result.body)){_context2.next=7;break;}return _context2.abrupt(\"return\",mapQuestionFromServer(result.body));case 7:return _context2.abrupt(\"return\",null);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function getQuestion(_x){return _ref2.apply(this,arguments);};}();export var searchQuestions=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(criteria){var result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return http({path:\"/questions?search=\".concat(criteria)});case 2:result=_context3.sent;if(!(result.ok&&result.body)){_context3.next=7;break;}return _context3.abrupt(\"return\",result.body.map(mapQuestionFromServer));case 7:return _context3.abrupt(\"return\",[]);case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function searchQuestions(_x2){return _ref3.apply(this,arguments);};}();export var postQuestion=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(question){var accesToken,result;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getAccessToken();case 2:accesToken=_context4.sent;_context4.next=5;return http({path:'/questions',method:'post',body:question,accesToken:accesToken});case 5:result=_context4.sent;if(!(result.ok&&result.body)){_context4.next=10;break;}return _context4.abrupt(\"return\",mapQuestionFromServer(result.body));case 10:return _context4.abrupt(\"return\",undefined);case 11:case\"end\":return _context4.stop();}}},_callee4);}));return function postQuestion(_x3){return _ref4.apply(this,arguments);};}();export var postAnswer=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(answer){var accesToken,result;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return getAccessToken();case 2:accesToken=_context5.sent;_context5.next=5;return http({path:'/questions/answer',method:'post',body:answer,accesToken:accesToken});case 5:result=_context5.sent;if(!result.ok){_context5.next=10;break;}return _context5.abrupt(\"return\",result.body);case 10:return _context5.abrupt(\"return\",undefined);case 11:case\"end\":return _context5.stop();}}},_callee5);}));return function postAnswer(_x4){return _ref5.apply(this,arguments);};}();","map":{"version":3,"sources":["C:/MyApps/reactQandA/clientApp/src/QuestionData.ts"],"names":["http","getAccessToken","mapQuestionFromServer","question","created","Date","answers","map","answer","getUnansweredQuestions","path","result","ok","body","getQuestion","questionId","searchQuestions","criteria","postQuestion","accesToken","method","undefined","postAnswer"],"mappings":"2bAAA,OAASA,IAAT,KAAqB,QAArB,CACA,OAASC,cAAT,KAA+B,QAA/B,CAqDA,MAAO,IAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CACnCC,QADmC,wCAGhCA,QAHgC,MAInCC,OAAO,CAAE,GAAIC,CAAAA,IAAJ,CAASF,QAAQ,CAACC,OAAlB,CAJ0B,CAKnCE,OAAO,CAAEH,QAAQ,CAACG,OAAT,CACLH,QAAQ,CAACG,OAAT,CAAiBC,GAAjB,CAAqB,SAACC,MAAD,wCAChBA,MADgB,MAEnBJ,OAAO,CAAE,GAAIC,CAAAA,IAAJ,CAASG,MAAM,CAACJ,OAAhB,CAFU,IAArB,CADK,CAKL,EAV+B,IAA9B,CAaP,MAAO,IAAMK,CAAAA,sBAAsB,0FAAG,oKACfT,CAAAA,IAAI,CAA2B,CAClDU,IAAI,CAAE,uBAD4C,CAA3B,CADW,QAC9BC,MAD8B,oBAIhCA,MAAM,CAACC,EAAP,EAAaD,MAAM,CAACE,IAJY,0DAK3BF,MAAM,CAACE,IAAP,CAAYN,GAAZ,CAAgBL,qBAAhB,CAL2B,yCAO3B,EAP2B,wDAAH,kBAAtBO,CAAAA,sBAAsB,0CAA5B,CAWP,MAAO,IAAMK,CAAAA,WAAW,2FAAG,kBACzBC,UADyB,wJAGJf,CAAAA,IAAI,CAAyB,CAChDU,IAAI,sBAAgBK,UAAhB,CAD4C,CAAzB,CAHA,QAGnBJ,MAHmB,qBAMrBA,MAAM,CAACC,EAAP,EAAaD,MAAM,CAACE,IANC,4DAOhBX,qBAAqB,CAACS,MAAM,CAACE,IAAR,CAPL,0CAShB,IATgB,0DAAH,kBAAXC,CAAAA,WAAW,6CAAjB,CAaP,MAAO,IAAME,CAAAA,eAAe,2FAAG,kBAC7BC,QAD6B,wJAGRjB,CAAAA,IAAI,CAA2B,CAClDU,IAAI,6BAAuBO,QAAvB,CAD8C,CAA3B,CAHI,QAGvBN,MAHuB,qBAMzBA,MAAM,CAACC,EAAP,EAAaD,MAAM,CAACE,IANK,4DAOpBF,MAAM,CAACE,IAAP,CAAYN,GAAZ,CAAgBL,qBAAhB,CAPoB,0CASpB,EAToB,0DAAH,kBAAfc,CAAAA,eAAe,8CAArB,CAaP,MAAO,IAAME,CAAAA,YAAY,2FAAG,kBAC1Bf,QAD0B,mKAGDF,CAAAA,cAAc,EAHb,QAGpBkB,UAHoB,uCAILnB,CAAAA,IAAI,CAA2C,CAClEU,IAAI,CAAE,YAD4D,CAElEU,MAAM,CAAE,MAF0D,CAGlEP,IAAI,CAAEV,QAH4D,CAIlEgB,UAAU,CAAVA,UAJkE,CAA3C,CAJC,QAIpBR,MAJoB,qBAUtBA,MAAM,CAACC,EAAP,EAAaD,MAAM,CAACE,IAVE,6DAWjBX,qBAAqB,CAACS,MAAM,CAACE,IAAR,CAXJ,2CAajBQ,SAbiB,2DAAH,kBAAZH,CAAAA,YAAY,8CAAlB,CAiBP,MAAO,IAAMI,CAAAA,UAAU,2FAAG,kBACxBd,MADwB,mKAGCP,CAAAA,cAAc,EAHf,QAGlBkB,UAHkB,uCAIHnB,CAAAA,IAAI,CAA6B,CACpDU,IAAI,CAAE,mBAD8C,CAEpDU,MAAM,CAAE,MAF4C,CAGpDP,IAAI,CAAEL,MAH8C,CAIpDW,UAAU,CAAVA,UAJoD,CAA7B,CAJD,QAIlBR,MAJkB,oBAUpBA,MAAM,CAACC,EAVa,4DAWfD,MAAM,CAACE,IAXQ,2CAafQ,SAbe,2DAAH,kBAAVC,CAAAA,UAAU,8CAAhB","sourcesContent":["import { http } from './http';\r\nimport { getAccessToken } from './Auth';\r\n\r\nexport interface QuestionData {\r\n  questionId: number;\r\n  title: string;\r\n  content: string;\r\n  userName: string;\r\n  created: Date;\r\n  answers: AnswerData[];\r\n}\r\n\r\nexport interface QuestionDataFromServer {\r\n  questionId: number;\r\n  title: string;\r\n  content: string;\r\n  userName: string;\r\n  created: string;\r\n  answers: Array<{\r\n    answerId: number;\r\n    content: string;\r\n    userName: string;\r\n    created: string;\r\n  }>;\r\n}\r\n\r\nexport interface AnswerData {\r\n  answerId: number;\r\n  content: string;\r\n  userName: string;\r\n  created: Date;\r\n}\r\n\r\nexport interface PostAnswerData {\r\n  questionId: number;\r\n  content: string;\r\n  userName: string;\r\n  created: Date;\r\n}\r\n\r\nexport interface PostQuestionData {\r\n  title: string;\r\n  content: string;\r\n  userName: string;\r\n  created: Date;\r\n}\r\n\r\nexport interface PostAnswerData {\r\n  questionId: number;\r\n  content: string;\r\n  userName: string;\r\n  created: Date;\r\n}\r\n\r\nexport const mapQuestionFromServer = (\r\n  question: QuestionDataFromServer,\r\n): QuestionData => ({\r\n  ...question,\r\n  created: new Date(question.created),\r\n  answers: question.answers\r\n    ? question.answers.map((answer) => ({\r\n        ...answer,\r\n        created: new Date(answer.created),\r\n      }))\r\n    : [],\r\n});\r\n\r\nexport const getUnansweredQuestions = async (): Promise<QuestionData[]> => {\r\n  const result = await http<QuestionDataFromServer[]>({\r\n    path: '/questions/unanswered',\r\n  });\r\n  if (result.ok && result.body) {\r\n    return result.body.map(mapQuestionFromServer);\r\n  } else {\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const getQuestion = async (\r\n  questionId: number,\r\n): Promise<QuestionData | null> => {\r\n  const result = await http<QuestionDataFromServer>({\r\n    path: `/questions/${questionId}`,\r\n  });\r\n  if (result.ok && result.body) {\r\n    return mapQuestionFromServer(result.body);\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const searchQuestions = async (\r\n  criteria: string,\r\n): Promise<QuestionData[]> => {\r\n  const result = await http<QuestionDataFromServer[]>({\r\n    path: `/questions?search=${criteria}`,\r\n  });\r\n  if (result.ok && result.body) {\r\n    return result.body.map(mapQuestionFromServer);\r\n  } else {\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const postQuestion = async (\r\n  question: PostQuestionData,\r\n): Promise<QuestionData | undefined> => {\r\n  const accesToken = await getAccessToken();\r\n  const result = await http<QuestionDataFromServer, PostQuestionData>({\r\n    path: '/questions',\r\n    method: 'post',\r\n    body: question,\r\n    accesToken,\r\n  });\r\n  if (result.ok && result.body) {\r\n    return mapQuestionFromServer(result.body);\r\n  } else {\r\n    return undefined;\r\n  }\r\n};\r\n\r\nexport const postAnswer = async (\r\n  answer: PostAnswerData,\r\n): Promise<AnswerData | undefined> => {\r\n  const accesToken = await getAccessToken();\r\n  const result = await http<AnswerData, PostAnswerData>({\r\n    path: '/questions/answer',\r\n    method: 'post',\r\n    body: answer,\r\n    accesToken,\r\n  });\r\n  if (result.ok) {\r\n    return result.body;\r\n  } else {\r\n    return undefined;\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}