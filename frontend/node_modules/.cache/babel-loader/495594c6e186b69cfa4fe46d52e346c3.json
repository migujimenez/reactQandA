{"ast":null,"code":"import { webAPIUrl } from './AppSettings';\nexport const http = async config => {\n  const request = new Request(`${webAPIUrl}${config.path}`, {\n    method: config.method || 'get',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  const response = await fetch(request);\n\n  if (response.ok) {\n    const body = await response.json();\n    return {\n      ok: response.ok,\n      body\n    };\n  } else {\n    logError(request, response);\n    return {\n      ok: response.ok\n    };\n  }\n};\n\nconst logError = async (request, response) => {\n  const contentType = response.headers.get('content-type');\n  let body;\n\n  if (contentType && contentType.indexOf('application/json') !== -1) {\n    body = await response.json();\n  } else {\n    body = await request.text();\n  }\n\n  console.error(`Error requesting ${request.method}${request.url}`, body);\n};","map":{"version":3,"sources":["C:/MyApps/reactQandA/clientApp/src/http.ts"],"names":["webAPIUrl","http","config","request","Request","path","method","headers","response","fetch","ok","body","json","logError","contentType","get","indexOf","text","console","error","url"],"mappings":"AAAA,SAASA,SAAT,QAA0B,eAA1B;AAcA,OAAO,MAAMC,IAAI,GAAG,MAClBC,MADkB,IAEc;AAChC,QAAMC,OAAO,GAAG,IAAIC,OAAJ,CAAa,GAAEJ,SAAU,GAAEE,MAAM,CAACG,IAAK,EAAvC,EAA0C;AACxDC,IAAAA,MAAM,EAAEJ,MAAM,CAACI,MAAP,IAAiB,KAD+B;AAExDC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB;AAF+C,GAA1C,CAAhB;AAIA,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACN,OAAD,CAA5B;;AACA,MAAIK,QAAQ,CAACE,EAAb,EAAiB;AACf,UAAMC,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAT,EAAnB;AACA,WAAO;AAAEF,MAAAA,EAAE,EAAEF,QAAQ,CAACE,EAAf;AAAmBC,MAAAA;AAAnB,KAAP;AACD,GAHD,MAGO;AACLE,IAAAA,QAAQ,CAACV,OAAD,EAAUK,QAAV,CAAR;AACA,WAAO;AAAEE,MAAAA,EAAE,EAAEF,QAAQ,CAACE;AAAf,KAAP;AACD;AACF,CAfM;;AAiBP,MAAMG,QAAQ,GAAG,OAAOV,OAAP,EAAyBK,QAAzB,KAAgD;AAC/D,QAAMM,WAAW,GAAGN,QAAQ,CAACD,OAAT,CAAiBQ,GAAjB,CAAqB,cAArB,CAApB;AACA,MAAIJ,IAAJ;;AACA,MAAIG,WAAW,IAAIA,WAAW,CAACE,OAAZ,CAAoB,kBAApB,MAA4C,CAAC,CAAhE,EAAmE;AACjEL,IAAAA,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAT,EAAb;AACD,GAFD,MAEO;AACLD,IAAAA,IAAI,GAAG,MAAMR,OAAO,CAACc,IAAR,EAAb;AACD;;AACDC,EAAAA,OAAO,CAACC,KAAR,CAAe,oBAAmBhB,OAAO,CAACG,MAAO,GAAEH,OAAO,CAACiB,GAAI,EAA/D,EAAkET,IAAlE;AACD,CATD","sourcesContent":["import { webAPIUrl } from './AppSettings';\r\n\r\nexport interface HttpRequest<REQB> {\r\n  path: string;\r\n  method?: string;\r\n  body?: REQB;\r\n  accesToken?: string;\r\n}\r\n\r\nexport interface HttpResponse<RESB> {\r\n  ok: boolean;\r\n  body?: RESB;\r\n}\r\n\r\nexport const http = async <RESB, REQB = undefined>(\r\n  config: HttpRequest<REQB>,\r\n): Promise<HttpResponse<RESB>> => {\r\n  const request = new Request(`${webAPIUrl}${config.path}`, {\r\n    method: config.method || 'get',\r\n    headers: { 'Content-Type': 'application/json' },\r\n  });\r\n  const response = await fetch(request);\r\n  if (response.ok) {\r\n    const body = await response.json();\r\n    return { ok: response.ok, body };\r\n  } else {\r\n    logError(request, response);\r\n    return { ok: response.ok };\r\n  }\r\n};\r\n\r\nconst logError = async (request: Request, response: Response) => {\r\n  const contentType = response.headers.get('content-type');\r\n  let body: any;\r\n  if (contentType && contentType.indexOf('application/json') !== -1) {\r\n    body = await response.json();\r\n  } else {\r\n    body = await request.text();\r\n  }\r\n  console.error(`Error requesting ${request.method}${request.url}`, body);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}